# NeuralTwin — 제품 기능 고도화 상세 기획
## Product Enhancement Specification v1.0

> **작성**: CPO & CSO | **기준**: IMPLEMENTATION_PLAN_2026Q1 v2 (완성도 ~75%) 기반  
> **목적**: UI/UX 고도화 · 유저플로우 재설계 · 디지털 트윈 혁신 · 리테일 AI 고도화  
> **Date**: 2026-03-02 | Confidential

---

## 목차

1. [디자인 시스템 & UI 고도화](#1-디자인-시스템--ui-고도화)
2. [유저플로우 전면 재설계](#2-유저플로우-전면-재설계)
3. [3D 디지털 트윈 혁신](#3-3d-디지털-트윈-혁신)
4. [리테일 AI 어시스턴트 고도화](#4-리테일-ai-어시스턴트-고도화)
5. [OS 대시보드 UX 고도화](#5-os-대시보드-ux-고도화)
6. [웹사이트 & AI 챗봇 고도화](#6-웹사이트--ai-챗봇-고도화)
7. [구현 우선순위 & 팀 배분](#7-구현-우선순위--팀-배분)

---

## 1. 디자인 시스템 & UI 고도화

### 1.1 현재 문제 진단

현재 코드베이스(`neuraltwin/sungshin` 기준)에서 T6의 UX 감사(Sprint 1)를 통해 식별될 핵심 문제:

- **일관성 부재**: shadcn/ui 기본값 + 커스텀 컴포넌트가 혼재. 동일 버튼이 화면마다 다른 느낌
- **정보 밀도 과잉**: 153개 테이블 데이터가 한 화면에 쏟아지는 경향. 사용자가 "무엇을 봐야 하는지" 모름
- **다크모드 미완성**: 글래스모피즘 가이드는 있으나 일부 컴포넌트에서 배경이 뚫려 보임
- **3D 뷰어와 2D 대시보드의 단절**: 전환이 탭 클릭이라 맥락이 끊김
- **모바일 대응 부재**: 점장이 스마트폰으로 보는 일간 리포트가 깨짐

---

### 1.2 NeuralTwin 디자인 언어 — "Spatial Intelligence"

> 매장을 공간으로, 데이터를 공간 위에 펼쳐지는 레이어로 표현한다.  
> 물리 세계(3D)와 데이터 세계(2D)가 자연스럽게 교차하는 인터페이스.

#### 컬러 시스템

```
Primary Palette (Dark-first)
├── Background    #0A0E1A  (Deep Space)
├── Surface       #111827  (Dark Navy)
├── Surface-2     #1C2333  (Elevated)
├── Border        #2D3748  (Subtle)
│
├── Accent-Cyan   #00D4FF  (IoT 데이터 / 실시간)
├── Accent-Purple #7C3AED  (AI 인사이트)
├── Accent-Emerald #10B981  (긍정 지표 / 성장)
├── Accent-Amber  #F59E0B  (경고 / 주의)
└── Accent-Rose   #F43F5E  (위험 / 손실)

Glassmorphism Layer
├── glass-sm   backdrop-blur-sm  bg-white/5   border border-white/10
├── glass-md   backdrop-blur-md  bg-white/8   border border-white/15
└── glass-lg   backdrop-blur-lg  bg-white/10  border border-white/20
```

#### 타이포그래피

```
Font: Inter (UI) + JetBrains Mono (데이터/수치)

Scale:
├── Display-2xl   64px / 700  (랜딩 히어로)
├── Display-xl    48px / 700  (섹션 타이틀)
├── H1            36px / 600  (페이지 헤더)
├── H2            28px / 600  (카드 타이틀)
├── H3            22px / 600  (섹션 레이블)
├── Body-lg       18px / 400  (본문 주)
├── Body          16px / 400  (본문)
├── Caption       14px / 400  (보조 텍스트)
├── Micro         12px / 500  (배지, 태그)
└── Mono          14px / 400  (수치, 코드)

Data Display Rule:
  수치는 항상 JetBrains Mono + tabular-nums
  단위는 caption 크기로 우측에 표시
  전일 대비 증감은 색상 + 화살표 아이콘
```

#### 스페이싱 & 레이아웃

```
Grid: 12-column, 24px gutter
Breakpoints: sm(640) md(768) lg(1024) xl(1280) 2xl(1536)

Container:
├── Dashboard: max-w-screen-2xl, px-6 (full-bleed 허용)
├── Website: max-w-7xl, px-4 sm:px-6
└── Mobile: full-width, px-4

Corner Radius:
├── xs: 4px  (인라인 배지)
├── sm: 8px  (버튼, 인풋)
├── md: 12px (카드)
├── lg: 16px (모달, 패널)
├── xl: 24px (대형 카드)
└── full: 9999px (칩, 아바타)

Shadow System (Dark mode):
├── shadow-glow-cyan   0 0 20px rgba(0,212,255,0.15)
├── shadow-glow-purple 0 0 20px rgba(124,58,237,0.15)
└── shadow-elevation   0 4px 24px rgba(0,0,0,0.4)
```

---

### 1.3 컴포넌트 시스템 고도화

#### MetricCard 2.0

현재 `MetricCard`는 숫자 + 레이블만 있음. 고도화 스펙:

```
┌─────────────────────────────────────────────┐
│  [아이콘]  방문객                    [•••]  │  ← context menu
│                                             │
│   12,847                      ▲ 8.3%       │  ← 수치 + 증감
│   명                          전일 대비     │
│                                             │
│  ━━━━━━━━━━━━━━━━━━━━━━━━━░░░░░░  (78%)   │  ← 목표 대비 프로그레스
│  목표 대비 78%                              │
│                                             │
│  ▁▂▃▄▃▅▆▇▆▅  (인라인 스파크라인)           │  ← 7일 트렌드
└─────────────────────────────────────────────┘

Props:
  value: number
  unit: string
  label: string
  change: { value: number; period: string }
  goal?: { value: number; current: number }
  trend?: number[]  // 7일 스파크라인
  status: 'normal' | 'warning' | 'critical' | 'excellent'
  onClick?: () => void  // 클릭 시 상세 드릴다운
```

#### ZoneCard 3D Mini Preview

존 분석 카드에 2D 히트맵 대신 미니 3D 뷰 내장:

```
┌──────────────────────────────────┐
│  [3D MINI VIEW - 120px height]   │
│   └ 해당 존만 하이라이트된 3D 뷰  │
├──────────────────────────────────┤
│  A 구역 (입구 우측)              │
│  체류시간  2분 34초  ▲ 12%      │
│  방문률    68%                   │
│  혼잡도    ████░░  Medium        │
└──────────────────────────────────┘
```

#### AIInsightBubble — 항상 떠있는 AI 패널

현재 AI 어시스턴트가 별도 페이지. 대신 **floating bubble**로:

```
화면 우측 하단 고정 위치

[접힌 상태]
  ┌──────────────────────┐
  │  🤖  AI가 할 말 있어요  │  ← pulsing animation
  └──────────────────────┘

[펼친 상태 — 화면 우측 300px 패널]
  ┌────────────────────────────────┐
  │  NeuralMind              [×]  │
  ├────────────────────────────────┤
  │  "오늘 B존 체류시간이           │
  │   평소 대비 -34% 입니다.        │
  │   입구 프로모션 테이블이        │
  │   동선을 막고 있어요."         │
  ├────────────────────────────────┤
  │  [💡 제안 보기]  [나중에]       │
  └────────────────────────────────┘
```

---

## 2. 유저플로우 전면 재설계

### 2.1 현재 플로우의 문제점

| 구간 | 현재 | 문제 |
|------|------|------|
| 최초 접속 | 랜딩 → 회원가입 → 대시보드 | 가치 체험 없이 바로 가입 요구 |
| 온보딩 | 7단계 위자드 | 매장 정보 입력이 너무 많음. 중도 포기 높음 |
| 일상 사용 | 각 탭 개별 진입 | 오늘 뭘 봐야 하는지 가이드 없음 |
| AI 사용 | 별도 탭으로 이동 | 맥락이 끊김. AI 진입 장벽 높음 |
| 3D 진입 | Studio 탭 클릭 | 언제 어떻게 쓰는지 몰라서 안 씀 |
| 모바일 | 미지원 | 점장이 현장에서 확인 불가 |

---

### 2.2 재설계된 유저플로우

#### Flow 0: 웹사이트 — "보기 전까지 믿지 않는다"

```
[랜딩 진입]
    │
    ├─ Hero: "당신 매장에서 지금 무슨 일이 일어나고 있는지 보세요"
    │         [라이브 데모 체험 →]  ← 가입 없이 바로 체험
    │
    ▼
[인터랙티브 데모 모드]  ← NEW
    │
    ├─ 실제 익명 파일럿 매장 데이터로 구동하는 라이브 대시보드
    │   (또는 시뮬레이션 데이터)
    │
    ├─ 사용자가 직접 조작:
    │   ├─ 날짜/시간대 슬라이더 드래그
    │   ├─ 존 클릭 → 체류시간 확인
    │   ├─ AI에게 질문: "이 구역 왜 비나요?" → 실시간 답변
    │   └─ 3D 뷰 토글 → 히트맵 오버레이
    │
    ├─ [5분 체험 후] 리드 캡처:
    │   "이 분석을 우리 매장에 적용하려면?"
    │   → 이메일 + 매장 유형 입력
    │
    └─ Lead Score 자동 계산 → CRM 등록
```

#### Flow 1: 온보딩 — "3분 안에 첫 번째 인사이트"

현재 7단계 → **2단계 즉시 시작 + 점진적 심화**로 개편

```
[가입 완료]
    │
    ▼
Step 1: "매장 유형 선택" (30초)
    │
    ├─ 패션  /  뷰티  /  식음료  /  라이프스타일  /  기타
    │   └─ 선택 즉시 해당 업종 샘플 데이터로 대시보드 미리보기
    │
    ▼
Step 2: "매장 이름만 입력" (10초)
    │
    └─ [바로 시작하기 →]
    
[즉시 대시보드 진입 — 샘플 데이터로 채워진 상태]
    │
    ├─ 배너: "지금은 샘플 데이터입니다. Pi 센서 연결하면 실데이터로"
    │         [센서 연결 →]  [나중에]
    │
    ├─ Tip 오버레이: "여기가 존별 체류시간이에요" (한 번만, 스킵 가능)
    │
    └─ AI 웰컴 메시지: "안녕하세요! 패션 매장 분석을 도와드릴게요.
                        우선 오늘 대시보드에서 무엇이 궁금하신가요?"

[심화 설정 — 필요할 때 언제든]
    ├─ 존 설정: Settings → 매장 레이아웃
    ├─ Pi 연결: Settings → 센서 관리
    ├─ POS 연동: Settings → 데이터 소스
    └─ 팀 초대: Settings → 팀 관리
```

#### Flow 2: 일상 사용 — "오전 10분 루틴"

```
[앱 진입 / 매일 아침]
    │
    ▼
[Morning Digest — 첫 화면]  ← NEW, 대시보드 홈 교체
    │
    ├─ 상단: "오늘 [날짜], [매장명]의 어제 요약"
    │
    ├─ [AI Daily Brief] — 카드 형태로 자동 생성
    │   ┌────────────────────────────────────────────┐
    │   │  📊 어제 핵심 지표                          │
    │   │  방문객 1,247명 (▲8.3% 전일비)             │
    │   │  전환율 3.8% (▼0.2%p)                      │
    │   │  체류시간 4분 12초 (평균)                   │
    │   ├────────────────────────────────────────────┤
    │   │  🤖 AI 오늘의 인사이트                      │
    │   │  "오후 2~4시 B존 체류가 전주 대비 -22%.     │
    │   │   신상품 진열 후 동선이 바뀐 것 같아요.     │
    │   │   오늘 오후 점검 추천드립니다."             │
    │   ├────────────────────────────────────────────┤
    │   │  ✅ 오늘 할 일 (AI 추천)                    │
    │   │  ○ B존 신상품 POP 위치 확인                 │
    │   │  ○ 주말 피크 대비 직원 스케줄 점검          │
    │   │  ○ 이번 주 레이아웃 변경 효과 리포트 확인   │
    │   └────────────────────────────────────────────┘
    │
    ├─ Quick Actions (아이콘 버튼 행)
    │   [📍 실시간]  [📊 분석]  [🏗 3D스튜디오]  [📄 리포트]  [🤖 AI질문]
    │
    └─ 아래 스크롤 → 오늘의 실시간 현황

[실시간 현황 — 스크롤 다운]
    ├─ 현재 매장 내 인원: 23명 (존별 분포 미니맵)
    ├─ 오늘 누적 방문객: 847명
    └─ 실시간 알림 피드 (이상 감지 시 강조)
```

#### Flow 3: 3D 스튜디오 — "이유 있는 진입, 목적 있는 사용"

현재: 탭 클릭으로 진입, 무엇을 해야 하는지 불명확  
재설계: **컨텍스트 진입** 방식

```
[진입 경로 1: AI 추천에서]
    AI: "B존 진열 변경이 효과적일 것 같아요."
    [3D로 변경 미리보기 →]  ← 버튼 클릭 시 해당 존이 선택된 채로 스튜디오 진입

[진입 경로 2: KPI 카드에서]
    B존 체류시간 카드 클릭 → [3D에서 B존 보기]
    → B존이 하이라이트된 채로 스튜디오 진입

[진입 경로 3: 알림에서]
    "C존 혼잡도 경보" 알림 탭 → [3D에서 확인]
    → 혼잡도 오버레이가 켜진 채로 진입

[스튜디오 내 가이드드 플로우]
    ├─ 목적 선택 (처음 진입 시)
    │   ○ "지금 매장 현황 보기"   → 실시간 오버레이 ON
    │   ○ "레이아웃 변경 검토"    → 편집 모드 진입
    │   ○ "과거 데이터 분석"      → Time Travel 모드
    │   ○ "시뮬레이션 실행"       → A/B 비교 모드
    │
    └─ 이후 맥락 유지 상태로 분석
```

#### Flow 4: 모바일 — "점장의 현장 루틴"

```
모바일 전용 뷰 (PWA 또는 반응형)

[홈]
    ├─ 현재 매장 상태 (인원, 혼잡도 트래픽 라이트)
    │   🟢 정상  /  🟡 혼잡  /  🔴 과밀
    │
    ├─ 오늘 KPI 3개 (방문객 / 전환율 / 체류시간)
    │
    └─ AI 인사이트 카드 1개 (오늘 가장 중요한 것)

[빠른 질문]
    └─ 음성 또는 텍스트로 AI에게 즉시 질문
        "지금 몇 명이에요?" / "오늘 피크 시간은?"

[알림]
    └─ 이상 탐지 알림 푸시 + 인앱 피드

[리포트]
    └─ 일간 PDF 다운로드 or 이메일 공유
```

---

### 2.3 마이크로 인터랙션 설계

#### 데이터 로딩 전략

```
현재: 스피너 또는 빈 화면
개선: Skeleton UI + 점진적 로딩

로딩 시퀀스:
  1. 레이아웃 skeleton (즉시)
  2. 중요도 높은 MetricCard 먼저 (100ms)
  3. 차트/그래프 (300ms)
  4. 3D 뷰 마지막 (500ms+)
```

#### 트랜지션 & 애니메이션

```
페이지 전환:    fade + slide (200ms ease-out)
카드 진입:      fade-up (150ms, stagger 50ms)
수치 변화:      countUp 애니메이션 (500ms)
알림 진입:      slide-in from right (250ms)
3D 씬 전환:     카메라 tween (600ms ease-in-out)
히트맵 토글:    opacity fade (300ms)

성능 규칙:
  - 모든 애니메이션은 transform/opacity만 사용 (layout reflow 방지)
  - prefers-reduced-motion 준수
  - 60fps 유지 (3D는 requestAnimationFrame)
```

#### 상태 피드백

```
빈 상태 (Empty State):
  각 화면별 맞춤 일러스트 + 행동 유도 메시지
  예) 존 분석 빈 상태: "센서가 연결되면 여기에 실시간 동선이 나타나요"
                        [센서 연결하기 →]

에러 상태:
  기술 에러 메시지 대신 사용자 언어로
  예) "데이터를 불러오지 못했어요. 잠시 후 다시 시도해주세요"
      [재시도] [문의하기]

성공 상태:
  "전략이 적용됐어요. ROI 추적을 시작합니다" + 컨페티 효과 (첫 번째만)
```

---

## 3. 3D 디지털 트윈 혁신

### 3.1 현재 구현 상태 & 한계

현재 완성도 83% 기준 (`IMPLEMENTATION_PLAN_2026Q1` 검증):

| 구현됨 ✅ | 미구현 🔴 |
|-----------|----------|
| 14개 오버레이 (고객아바타, 히트맵, 혼잡도, 스태프, 환경 등) | Time Travel 재생 (타임라인 스크러버) |
| CustomerSimulationEngine (확률적 고객 행동 모델링) | `neuralsense_live_state` → 3D 실시간 연결 |
| 가구/진열대 배치 편집 | 레이아웃 변경 후 AI 시뮬레이션 자동 실행 |
| A/B 비교 뷰 (기본) | 음성 명령으로 3D 조작 |

---

### 3.2 차세대 3D 엔진 스펙

#### 렌더링 품질 고도화

```javascript
// 현재 Canvas3D 설정 개선
<Canvas
  shadows="soft"                    // PCFSoftShadowMap
  dpr={[1, 2]}                      // 레티나 디스플레이 대응
  gl={{
    antialias: true,
    toneMapping: THREE.ACESFilmicToneMapping,
    toneMappingExposure: 1.0,
    outputColorSpace: THREE.SRGBColorSpace,
  }}
  camera={{ fov: 50, near: 0.1, far: 1000 }}
>
  <Environment preset="warehouse" />         // 물리 기반 조명 (HDRI)
  <ContactShadows opacity={0.3} blur={2} />  // 부드러운 그림자
  <BakeShadows />                            // 정적 그림자 bake
  <PerformanceMonitor />                     // 프레임 드롭 자동 감지 → LOD
</Canvas>

매장 환경:
├── 천장 조명: RectAreaLight (형광등 배열 재현)
├── 자연광: DirectionalLight (창문 위치 기반)
├── 환경광: AmbientLight (0.3 intensity)
└── 반사: ReflectorGeometry (바닥 반사)
```

#### 고객 아바타 시스템 고도화

```
현재: 단순 구체/실린더
개선: 의미 있는 시각적 정보 전달

아바타 표현 규칙:
├── 모양: 캡슐형 (성별 중립, 개인 특정 불가)
├── 색상: 체류 시간에 따라 그라디언트
│         │  0~30초  → 파랑 (신규 진입)
│         │  30초~2분 → 초록 (관심)
│         │  2분~5분  → 노랑 (깊은 탐색)
│         └  5분+     → 주황 (고관여)
│
├── 동선 Trail: 이동 경로를 파티클 라인으로 표시
│               Trail 길이 = 최근 30초 이동 경로
│               Trail 투명도 = 시간이 지날수록 fade
│
├── 상태 아이콘: 아바타 위 플로팅
│               🛒 = 구매 직전 행동 감지
│               ⏸ = 5초+ 정지 (제품 검토)
│               👥 = 2인 이상 그룹
│
└── 혼잡도 반응: 혼잡 시 아바타가 서로 밀리는 물리 시뮬레이션

LOD (Level of Detail):
  가까이: 풀 디테일 (Trail + 아이콘 + 그림자)
  중간:   Trail만 (아이콘 숨김)
  멀리:   단순 점 (GPU 인스턴싱)
```

#### Time Travel — 타임라인 재생 시스템

현재 `simulation_history` 테이블 존재, UI 미구현:

```
[스튜디오 하단 타임라인 컨트롤]

┌─────────────────────────────────────────────────────────────────┐
│  ◀◀  ◀  ■  ▶  ▶▶     ×0.5  ×1  ×2  ×5  ×10          🔴 LIVE  │
├─────────────────────────────────────────────────────────────────┤
│  AM  9  10  11  12  PM 1   2   3   4   5   6   7   8  9  10   │
│  ┃━━━━━━━━━━━━━━━━━━━━━━━┿━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┃  │
│  │                       ↑                                   │  │
│  │                   현재 시간                               │  │
│  │                                                           │  │
│  ████░░░████████████░░░░░░████████████████░░░░░░████████████  │
│  └── 방문객 밀도 (히스토그램 미니뷰)                          │  │
└─────────────────────────────────────────────────────────────────┘

기능:
├── 날짜 선택: 달력 피커 (최대 90일 보관)
├── 재생 속도: ×0.5 ~ ×10 (실시간의 최대 10배속)
├── 구간 선택: 타임라인 드래그로 A/B 구간 지정
├── 이벤트 마커: VMD 변경일, 프로모션 시작일 표시
├── 스냅샷: 특정 시점 상태를 고정 저장
└── 비교: 다른 날의 같은 시간대와 분할 화면 비교

데이터 처리:
  1분 단위 스냅샷 재생 (simulation_history 테이블)
  재생 중 히트맵 오버레이 실시간 업데이트
  재생 속도에 맞춘 WebGL transition
```

#### 레이아웃 시뮬레이션 고도화

```
[현재] 가구 드래그 → 수동으로 "시뮬레이션 실행" 버튼 클릭
[개선] 변경 즉시 예측 + AI 실시간 코멘트

Auto-Simulation 파이프라인:
  가구 이동 완료 (drag-end)
    └→ debounce 1000ms
    └→ run-simulation EF 자동 호출
    └→ AI 예측 결과 오버레이에 실시간 반영
    └→ 사이드패널에 "예상 영향" 즉시 표시

예상 영향 패널:
┌────────────────────────────────┐
│  예상 변화                     │
│  ─────────────────────────    │
│  B존 체류시간    +35%  ↑      │
│  A존 방문률      -12%  ↓      │
│  전체 전환율     +1.2%p ↑     │
│  ─────────────────────────    │
│  신뢰도: ████████░░ 82%       │
│  AI: "입구 시야 확보로 B존     │
│  노출이 늘어날 것 같아요."     │
│                                │
│  [이 변경 적용하기]  [되돌리기] │
└────────────────────────────────┘
```

---

### 3.3 멀티 매장 3D 비교 뷰

프랜차이즈 본사용 (Growth/Enterprise):

```
[두 매장 나란히 비교]

┌──────────────────┬──────────────────┐
│   강남점 (3D)    │   홍대점 (3D)    │
│                  │                  │
│  [히트맵 ON]    │  [히트맵 ON]    │
│                  │                  │
│  체류시간: 4:12  │  체류시간: 2:51  │
│  전환율: 4.2%   │  전환율: 2.9%   │
└──────────────────┴──────────────────┘

│ AI: "강남점은 Decompression Zone이 2.5m로 여유롭고,
│      Right-Turn Bias를 활용한 동선이 설계되어 있어요.
│      홍대점은 입구 바로 앞 프로모션 테이블이 흐름을 막고 있습니다."

[표준 레이아웃 적용 →]  → 홍대점 3D에서 시뮬레이션 실행
```

---

### 3.4 음성 명령 인터페이스

```
[스튜디오 우측 상단 마이크 아이콘]

음성 명령 예시:
  "B존 히트맵 켜줘"       → HeatmapOverlay B존 활성화
  "어제 오후 3시 보여줘"   → Time Travel 해당 시간으로 이동
  "입구 테이블 옮겨줘"     → PlacementEditor 해당 가구 선택
  "전환율 오버레이 꺼줘"   → 해당 오버레이 비활성화
  "A/B 비교 시작"          → LayoutComparisonView 진입

기술 구현:
  Web Speech API (브라우저 내장)
  → 텍스트 변환 후 NLP 파싱
  → 3D 씬 명령 실행
  → TTS 피드백: "B존 히트맵을 켰어요"
```

---

## 4. 리테일 AI 어시스턴트 고도화

### 4.1 현재 상태 & 한계

현재 `neuraltwin-assistant` (34파일, Gemini 2.5 Flash) 구현 완료.  
`retail-chatbot` (26파일, 웹사이트용) 별도 운영.

**핵심 한계:**
- 단발성 질의 응답. 대화 맥락(멀티턴) 유지 약함
- 한국 리테일 도메인 지식이 하드코딩(`retailKnowledge.ts` 12개 토픽)
- 이상 탐지가 수동 질의에만 반응. 능동적 알림 없음
- 숫자를 말해줄 뿐, "왜 그런지 + 어떻게 해야 하는지"가 약함
- 실행까지 연결되지 않음 (추천 → 3D 시뮬레이션 실행이 단절)

---

### 4.2 NeuralMind 3.0 아키텍처

> **목표**: 리테일 도메인 전문가 수준의 AI.  
> 단순 데이터 조회를 넘어 **진단 → 인사이트 → 제안 → 실행**까지 원스톱으로.

#### 4단계 응답 프레임워크

모든 응답을 4레이어로 구조화:

```
Layer 1: What (무슨 일이?)
  데이터 팩트. 수치와 변화율.
  "어제 B존 체류시간이 2분 12초로, 전주 동일 요일 대비 -34%였습니다."

Layer 2: Why (왜?)
  교차 분석. 상관관계 탐색.
  "같은 시간대 입구 유입은 정상이었고, 신상품 진열 후 B존 동선 유입이
   줄었습니다. 진열 변경이 고객 흐름을 바꾼 것으로 보입니다."

Layer 3: So What (그래서?)
  영향도 해석. 비즈니스 맥락.
  "B존 전환율이 -0.8%p 하락했어요. 일 매출로 환산하면 약 ₩24만 영향입니다."

Layer 4: Now What (어떻게 해야?)
  실행 가능한 제안 + 실행 버튼.
  "입구에서 B존으로 유도하는 POP 사이니지 추가를 권장합니다.
   3D에서 미리 시뮬레이션해볼까요?" [3D 시뮬레이션 →]
```

#### 멀티턴 컨텍스트 엔진

```
현재: 각 질문이 독립적
개선: 대화 세션 내 완전한 맥락 유지

컨텍스트 구조:
{
  session_id: string,
  store_context: {
    store_id, current_date, current_time,
    active_kpis: KPISnapshot,
    active_view: '3d' | 'analytics' | 'home',
    selected_zone: string | null,
    recent_events: Event[]  // 최근 VMD 변경, 이상 탐지 등
  },
  conversation_history: Message[],  // 최대 20턴
  user_intent: Intent,  // 현재 사용자가 해결하려는 것
  pending_action: Action | null  // 제안 중인 실행 액션
}

대화 예시:
  Q: "어제 매출이 왜 떨어졌어?"
  A: (Layer 1~4 응답)

  Q: "그럼 B존 어떻게 바꾸면 좋아?"  ← 맥락 유지
  A: "방금 분석에서 B존 입구 노출 문제를 발견했는데, ...  ← 앞 대화 참조

  Q: "시뮬레이션 해봐"  ← 자연어로 실행 트리거
  A: [3D 스튜디오에서 B존 레이아웃 편집 모드로 전환]
```

---

### 4.3 능동적 AI (Proactive Intelligence)

현재는 사용자가 물어봐야만 답함. **AI가 먼저 알려주는** 시스템으로:

#### 이상 탐지 엔진 고도화

```
현재: daily_kpis_agg 패턴 분석 (템플릿만 존재, 미구현)
개선: 다차원 이상 탐지

탐지 레이어:
  L1. 통계적 이상 (단기)
      → 3시그마 기반: 최근 30분 방문객이 평균 대비 -40% 이상
      → 즉시 알림 (1분 이내)

  L2. 패턴 이상 (중기)
      → 요일/시간대/날씨 보정 후 비교
      → "화요일 오후치고는 너무 한산해요"
      → 알림 (15분 주기 체크)

  L3. 트렌드 이상 (장기)
      → 7일 이동평균 하락 감지
      → "이번 주 전환율이 3주 연속 하락 중이에요"
      → 일간 AI Brief에 포함

  L4. 교차 이상 (복합)
      → 방문객 ↑ + 전환율 ↓ 동시 = "트래픽이 늘었는데 구매로 안 이어지고 있어요"
      → 즉시 인사이트 패널 표시

알림 우선순위:
  🔴 긴급: 매출 영향 추정 ₩10만+/시간
  🟡 주의: 패턴 이탈 2시그마 이상
  🔵 참고: 트렌드 변화 감지
```

#### Morning Digest 자동 생성

```javascript
// Edge Function: generate-morning-digest
// 매일 오전 8시 실행 (cron)

const digest = await generateDigest({
  store_id,
  date: yesterday,
  sections: [
    'kpi_summary',       // 핵심 지표 3개
    'ai_insight',        // 가장 중요한 발견 1개
    'action_items',      // 오늘 할 일 3개 (AI 추천)
    'weekly_trend',      // 주간 트렌드 (월요일만)
    'upcoming_events',   // 이번 주 날씨, 공휴일
  ]
})

// 응답 형식: Markdown → 앱 내 카드 + 이메일
```

---

### 4.4 도메인 지식 레이어 고도화 (T5 주도)

현재 `retailKnowledge.ts` 12개 하드코딩 토픽 → **동적 RAG 시스템**으로:

```
retail_knowledge_chunks 테이블 구조:
  id, category, subcategory, content, embedding,
  industry_type, source, updated_at, relevance_score

카테고리:
├── 리테일 KPI 정의
│   ├── 업종별 전환율 벤치마크 (패션/뷰티/식품/라이프스타일)
│   ├── 체류시간 업종별 평균
│   ├── 데드존 정의 기준
│   └── 피크 시간대 패턴
│
├── VMD & 레이아웃 원칙
│   ├── Decompression Zone
│   ├── Right-Turn Bias
│   ├── Power Wall / Feature Wall
│   ├── Pathway vs. Racetrack vs. Loop 레이아웃
│   └── 시즌별 레이아웃 변경 가이드
│
├── 고객 행동 심리학
│   ├── Butt-Brush Effect (혼잡 회피)
│   ├── 시선 추적 패턴 (Eye-Level is Buy-Level)
│   ├── 충동구매 유발 요소
│   └── 동선 유도 기법
│
├── 한국 리테일 특성
│   ├── 업종별 평균 매출/객단가 데이터
│   ├── 시즌/명절별 패턴 (추석, 설, 블랙프라이데이)
│   ├── 날씨 영향 계수 (강수량 vs 방문객 상관)
│   └── 지역별 상권 특성
│
└── 경쟁사 동향
    ├── 올리브영 VMD 패턴
    ├── 다이소 동선 설계 특성
    └── 무신사 오프라인 전략

RAG 검색 전략:
  1. 사용자 질의 → 임베딩 생성
  2. vector similarity search (pgvector)
  3. 매장 컨텍스트로 rerank (업종, 규모, 지역)
  4. 최상위 5개 청크를 프롬프트에 주입
  5. 응답 생성 시 출처 표시 ("VMD 원칙 기반")
```

---

### 4.5 AI 도구 (Tool Use) 확장

현재 6개 RPC 함수 호출 → **완전한 Tool Suite**로:

```python
# AI가 사용할 수 있는 도구 목록

tools = [
  # 데이터 조회
  get_kpi_summary(store_id, date_range, zones),
  get_zone_detail(store_id, zone_id, metrics),
  get_customer_path_analysis(store_id, date_range),
  get_anomaly_history(store_id, days),
  compare_stores(store_ids, metrics, date_range),  # 멀티 매장

  # 분석
  run_correlation_analysis(metric_a, metric_b, date_range),
  detect_pattern_change(store_id, zone_id),
  calculate_roi(strategy_id),
  forecast_traffic(store_id, date, conditions),  # 날씨+이벤트 반영

  # 외부 데이터
  get_weather_forecast(location, days),
  get_nearby_events(location, radius),
  search_retail_trends(query),  # Serper API

  # 실행 (승인 필요)
  create_task(title, assignee, due_date),  # 할 일 추가
  trigger_simulation(store_id, layout_change),  # 3D 시뮬레이션 시작
  send_report(store_id, report_type, recipients),  # 리포트 이메일 발송
  schedule_alert(condition, message),  # 알림 규칙 설정
]
```

---

### 4.6 업종별 AI 전문화 (T5 데이터 레이어)

```
업종 감지 → 전문 페르소나 활성화

패션 매장 모드:
  ├── VMD 중심 언어 ("데컴프레션 존", "파워 월")
  ├── 시즌 컬렉션 교체 주기 인지
  ├── 피팅룸 전환율 추적 강조
  └── 벤치마크: 국내 SPA 브랜드 평균 KPI

뷰티 매장 모드:
  ├── 카테고리별 체류 분석 강조 (스킨케어/메이크업/향수)
  ├── 테스터 구역 효과 측정
  ├── 충동구매 유발 동선 최적화
  └── 벤치마크: H&B 스토어 업계 평균

백화점/쇼핑몰 모드:
  ├── 테넌트별 성과 비교
  ├── 층별 트래픽 분산 분석
  ├── 앵커 테넌트 효과 측정
  └── 임대 가치 산정 언어 사용

F&B 모드:
  ├── 좌석 점유율 & 테이블 회전율
  ├── 대기 행렬 동선 분석
  ├── 피크 시간대 인력 최적화
  └── 영업시간 최적화 제안
```

---

## 5. OS 대시보드 UX 고도화

### 5.1 네비게이션 재설계

```
현재: 탭 기반 사이드바 (모든 탭이 동등한 위계)
개선: 컨텍스트 인식 사이드바

[사이드바 — 접힌 상태 (64px)]
  🏠  홈
  📍  실시간          ← 🔴 라이브 배지 (고객 있을 때)
  📊  분석
  🏗  스튜디오
  🤖  AI
  💰  ROI
  ⚙   설정

[사이드바 — 펼친 상태 (220px)]
  각 항목 아래 컨텍스트 서브메뉴 표시
  예) 분석 펼침:
    ├── 트래픽 분석
    ├── 존 분석
    ├── 동선 분석        ← 현재 페이지 하이라이트
    ├── 전환 퍼널
    └── 외부 환경

멀티 매장 전환:
  사이드바 상단 매장 선택기
  ┌─────────────────────┐
  │  🏪 강남점          ▼ │
  │  ─────────────────  │
  │  ○ 홍대점               │
  │  ○ 신촌점               │
  │  ○ 전체 매장 비교   │
  └─────────────────────┘
```

### 5.2 분석 페이지 고도화

#### 트래픽 분석 — 레이어드 차트

```
현재: 단순 막대/라인 차트
개선: 컨텍스트 레이어드 뷰

┌─────────────────────────────────────────────────────────┐
│  방문객 추이                    [일간 ▼] [이번 주 ▼]   │
│                                                         │
│  1,200 ┤                     ╭──╮                      │
│  1,000 ┤             ╭──╮   ╱    ╲                    │
│    800 ┤         ╭──╱    ╰──╯     ╲                  │
│    600 ┤─────────╯                  ╲───              │
│                                                         │
│        9  10  11  12   1   2   3   4   5   6   7      │
│                                                         │
│  [이벤트 마커]                                          │
│  ↑ 11:30 — 근처 맛집 오픈 (날씨 맑음, 도보 트래픽 ↑)  │
│  ↓ 14:00 — B존 진열 변경 (방문객 일시 혼란?)          │
└─────────────────────────────────────────────────────────┘

드릴다운:
  차트 특정 시간대 클릭 → 해당 시간 3D 스냅샷 팝업
  "이 시간대 3D로 보기" 버튼
```

#### 전환 퍼널 — 고객 여정 샌키 다이어그램

```
현재: 단순 퍼널 차트
개선: 존별 이동 흐름 샌키 다이어그램

                    [입구]
                   /       \
           [A존]          [B존]
          /     \         /    \
       [C존]  [피팅룸] [D존]  [계산대]
        |        |              |
      [퇴장]  [구매]         [구매]

각 노드: 방문객 수 + 체류시간
각 선: 이동 비율 (두께 = 비율)
색상: 전환으로 이어진 경로(초록) vs 이탈(회색)

인터랙션:
  노드 클릭 → 해당 존 3D 하이라이트
  선 클릭 → 이 경로 고객의 평균 체류패턴 표시
```

### 5.3 멀티 매장 대시보드 (Growth/Enterprise)

```
[본사 운영팀장 뷰]

┌─────────────────────────────────────────────────────────┐
│  전체 매장 현황              [이번 주] [지난 주] [비교]  │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  매장 성과 랭킹                         지도 뷰 ⟲       │
│  ┌────┬──────────┬──────┬──────┬──────┐                │
│  │순위│ 매장     │방문객│전환율│체류  │                │
│  ├────┼──────────┼──────┼──────┼──────┤                │
│  │ 1  │ 강남점 🏆│8,421 │4.8% │5:12 │                │
│  │ 2  │ 홍대점   │7,204 │4.1% │4:45 │                │
│  │ ...│          │      │     │      │                │
│  │ 8  │ 신촌점 ⚠ │4,102 │2.3% │3:01 │                │
│  └────┴──────────┴──────┴──────┴──────┘                │
│                                                         │
│  AI: "신촌점이 하위 그룹에서 3주 연속 최하위입니다.    │
│       강남점과 동선 설계 차이를 분석해볼까요?" [분석 →] │
└─────────────────────────────────────────────────────────┘

우수 매장 패턴 → 하위 매장 적용 플로우:
  1. 상위 매장 패턴 추출 (AI 분석)
  2. 하위 매장에 적용 시뮬레이션 (3D)
  3. 예상 효과 산출
  4. 본사 가이드라인으로 배포 (hq_guidelines)
  5. 적용 여부 추적 + ROI 측정
```

---

## 6. 웹사이트 & AI 챗봇 고도화

### 6.1 랜딩 페이지 재설계

```
현재: 정적 랜딩 + AI 챗봇 사이드
개선: 인터랙티브 라이브 데모가 랜딩의 중심

[Hero Section — Above the Fold]
  배경: 실제 매장 3D 뷰 (애니메이션, 고객 아바타 이동)
  헤드라인: "지금 이 순간, 당신 매장에서 무슨 일이 일어나고 있나요?"
  서브: "WiFi 센서 8대. 설치 2시간. 내일부터 데이터 기반 운영."
  CTA: [라이브 데모 체험 — 가입 불필요] (형광 버튼)

[인터랙티브 데모 섹션]
  실제 조작 가능한 미니 대시보드
  ├─ 시간대 슬라이더: 드래그하면 3D 고객 흐름 변화
  ├─ 존 클릭: "이 구역 체류시간 2분 34초, 전환율 38%"
  ├─ AI 질문창: 타이핑하면 실시간 답변
  └─ "우리 매장에 적용하면?" → 업종/면적 입력 → ROI 즉시 계산

[Social Proof]
  실제 파일럿 결과 (익명)
  "OO 패션 브랜드 파일럿 결과: 전환율 +1.1%p = 월 매출 +₩8,200만"
  데이터 정확도 수치, 설치 소요 시간

[가격 페이지 — 투명하게]
  월 구독 Tier + 진단 리포트 일회성
  ROI 계산기 내장 (입력값 → 예상 추가 매출 계산)
```

### 6.2 웹사이트 AI 챗봇 고도화

현재 `retail-chatbot` (게스트 10턴 무료) → **더 강력한 리드 생성 도구**로:

```
[분할 화면 개선]

좌측 (대화 패널):
  ├─ 메시지 버블: 사용자(우)/AI(좌) 명확 구분
  ├─ 타이핑 인디케이터: "NeuralMind가 분석 중..."
  ├─ 소스 배지: "업계 평균 데이터 기반" / "VMD 원칙 기반"
  ├─ 후속 질문 칩: [그럼 ROI는?] [설치 방법은?] [가격은?]
  └─ 공유 버튼: 이 대화 링크 공유

우측 (3D 비주얼):
  ├─ 대화 맥락에 따라 자동 변환
  │   "전환율 얘기" → 퍼널 차트
  │   "동선 얘기"   → 3D 고객 흐름
  │   "ROI 얘기"    → 막대 차트
  │   "레이아웃"    → 매장 3D
  └─ 인터랙티브: 우측 3D 클릭 → 좌측 대화에 반영

리드 캡처 개선:
  현재: 폼 팝업
  개선: 대화 내에서 자연스럽게
  
  AI: "구체적으로 OO점에 적용 시뮬레이션을 돌려드릴게요.
       매장 면적과 업종을 알려주시면 더 정확한 수치를 드릴 수 있어요."
  → 입력 즉시 백그라운드에서 리드 저장 + 점수 계산
```

---

## 7. 구현 우선순위 & 팀 배분

### 7.1 고도화 항목 우선순위 매트릭스

| 항목 | 임팩트 | 공수 | 우선순위 | 담당 | Phase |
|------|:------:|:----:|:--------:|------|:-----:|
| Morning Digest 자동 생성 | ★★★★★ | M | **P0** | T2+T5 | 1 |
| MetricCard 2.0 (스파크라인+목표) | ★★★★★ | S | **P0** | T3+T6 | 1 |
| AIInsightBubble (플로팅 패널) | ★★★★★ | M | **P0** | T3+T6 | 1 |
| 이상 탐지 엔진 (다차원) | ★★★★★ | L | **P0** | T2+T5 | 1~2 |
| 온보딩 2단계 즉시 시작 | ★★★★★ | S | **P0** | T3+T4+T6 | 1 |
| 4단계 AI 응답 프레임워크 | ★★★★★ | M | **P0** | T2+T5 | 1 |
| 디자인 시스템 (토큰+컴포넌트) | ★★★★ | L | **P1** | T6 | 1 |
| Time Travel 타임라인 | ★★★★ | L | **P1** | T3+T6 | 2 |
| RAG 도메인 지식 레이어 | ★★★★ | L | **P1** | T5+T2 | 1~2 |
| 인터랙티브 랜딩 데모 | ★★★★ | L | **P1** | T4+T3+T6 | 1~2 |
| 고객 아바타 시스템 고도화 | ★★★ | M | **P2** | T3 | 2 |
| 음성 명령 인터페이스 | ★★★ | M | **P2** | T3+T2 | 2 |
| 멀티 매장 3D 비교 뷰 | ★★★ | L | **P2** | T3+T6 | 2 |
| 샌키 다이어그램 퍼널 | ★★★ | M | **P2** | T3+T6 | 2 |
| 업종별 AI 전문화 | ★★★★ | M | **P1** | T5+T2 | 1~2 |
| 컨텍스트 진입 3D 스튜디오 | ★★★★ | M | **P1** | T3+T6 | 2 |
| 모바일 PWA | ★★★★ | L | **P1** | T4+T6 | 2 |

> S=Small(1~3일) / M=Medium(1~2주) / L=Large(2~4주)

---

### 7.2 Sprint별 고도화 구현 계획

#### Sprint 1~2 (W1~W4): 기반 + P0 고도화 병행

```
T6 UI/UX:
  ├─ W1: 전체 UX 감사 + 디자인 시스템 토큰 정의
  ├─ W2: MetricCard 2.0 스펙 + AIInsightBubble 스펙
  ├─ W3: 온보딩 2단계 리디자인 스펙
  └─ W4: 결제/구독 UX 설계

T3 DT/OS:
  ├─ W1~2: live_state→3D 연결 (크리티컬)
  ├─ W3: MetricCard 2.0 구현
  └─ W4: AIInsightBubble 구현

T5 Product Data:
  ├─ W1~2: RAG 도메인 지식 데이터 수집 (패션/뷰티/라이프스타일)
  ├─ W3: 4단계 AI 응답 프레임워크 프롬프트 설계
  └─ W4: Morning Digest 템플릿 + 업종별 AI 테스트

T2 Backend:
  ├─ W1~2: RLS + 이상 탐지 EF 구현
  ├─ W3: Morning Digest cron + generate-morning-digest EF
  └─ W4: AI Tool Suite 확장 (6개 → 14개)
```

#### Sprint 3~4 (W5~W8): P1 고도화

```
T6:
  ├─ W5: Time Travel UX 스펙
  ├─ W6: 인터랙티브 랜딩 데모 와이어프레임
  ├─ W7: 모바일 뷰 스펙
  └─ W8: 피치덱 + 데모 UI

T3:
  ├─ W5~6: Time Travel 타임라인 구현
  ├─ W7: 컨텍스트 진입 스튜디오 플로우
  └─ W8: 데모 시나리오 3종 + 고객 아바타 고도화

T5:
  ├─ W5~6: RAG 데이터 레이어 구축 완료
  ├─ W7: 업종별 AI 전문화 데이터 + 테스트
  └─ W8: 케이스 스터디 + 데모 데이터

T4:
  ├─ W5: 인터랙티브 랜딩 데모 구현 시작
  ├─ W6~7: 랜딩 + 가격 페이지 리뉴얼
  └─ W8: 블로그/케이스 스터디 페이지
```

---

### 7.3 성공 지표 (고도화 버전)

| 지표 | Phase 1 목표 (8주) | Phase 2 목표 (6개월) |
|------|:-----------------:|:-------------------:|
| Morning Digest 오픈율 | > 60% | > 70% |
| AI 질의 응답 만족도 | > 4.0 / 5.0 | > 4.5 / 5.0 |
| 이상 탐지 알림 → 실행 전환율 | > 40% | > 60% |
| 온보딩 완료율 (2단계 방식) | > 85% | > 90% |
| 3D 스튜디오 주간 활성 사용자 | 파일럿 매장의 3회/주 | 전체 고객의 50%+ |
| 웹사이트 데모 체험 → 리드 전환율 | > 20% | > 30% |
| 대시보드 DAU/MAU 비율 | > 40% | > 60% |
| AI 추천 → 실행 전환율 | > 25% | > 40% |
| 고객 전환율 개선 (NeuralTwin 도입 후) | +0.5%p | +1.0%p+ |

---

> ### 핵심 원칙 요약
>
> **디자인**: 공간 지능(Spatial Intelligence) — 물리 세계와 데이터 세계의 자연스러운 교차  
> **UX**: 컨텍스트 진입 + 목적 있는 흐름 — 사용자가 "무엇을 봐야 하는지" 항상 알 수 있게  
> **3D**: 시각적 아름다움이 아니라 분석 도구 — 클릭할 이유, 볼 이유, 실행할 이유  
> **AI**: 묻기 전에 먼저 — 진단 → 인사이트 → 제안 → 실행의 완전한 사이클  

---

*NeuralTwin | Product Enhancement Spec v1.0 | 2026-03-02 | CPO & CSO*
